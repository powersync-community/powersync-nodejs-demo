# PowerSync + Node.js

This is a basic repo to get started  quickly with PowerSync  + Node.js using plain JavaScript.

In order to use the [PowerSync Node.js SDK](https://docs.powersync.com/client-sdk-references/node) with plain JavaScript you need to add the `"type": "module"` in the package.json
and use `import` statements as opposed to `require`. 

## Setup

Once you've cloned the repo, make sure to use Node.js v20 or run `nvm use` if you have NVM installed. Next, install 
dependencies.

### Project Setup

```shell
npm install
```

Once that's done, create a new `.env` file and use the same variables as defined in the `.env.template` provided in the 
repo.

```shell
cp .env.template .env
```

This starter repo uses a development token to authenticate and one can be generated by following [this guide](https://docs.powersync.com/installation/authentication-setup/development-tokens#development-tokens).
The PowerSync URL can be found in the PowerSync Cloud dashboard or you can point it to the PowerSync url of your self-host
instance.
```dotenv
POWERSYNC_URL=
POWERSYNC_DEV_TOKEN=
```

## Run the App

Once the setup is complete, you can simply start the app.

```shell
npm start
```

This will run the `./src/index.js` file and connect to the PowerSync instance. 

## Customization

### AppSchema
This starter repo uses the Todo List demo data model with two tables, you can update the `./src/appSchema.js` file to incorporate
your app Schema.

### Connector - fetchCredentials
A basic backend connector (`./src/connector.js`) is used in this starter repo, however you can update the `fetchCredentials` to connect to your identity provider
or custom token endpoints for PowerSync to use.

### Connector - uploadData
This starter repo does not upload any changes made to the SQLite database to a particular backend. You can update the `uploadData`
function in the `./src/connector.js` and add some code that will upload the changes to your desired location for persistence to your 
source database. 


